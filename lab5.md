# การทดลองที่ 5 เรื่อง การเขียนโปรแกรมเชื่อมต่อไวไฟและเว็บเซอร์เวอร์

## วัตถุประสงค์
1.เพื่อศึกษาการขียนโปรแกรมเชื่อมต่อไวไฟและเว็บเซอร์เวอร์

2.เพื่อศึกษาเกี่ยวกับไมโครคอนโทรเลอร์ที่เขียนโปรแกรมแล้วนำไปประยุกต์ใช้
### อุปกรณ์ที่ใช้
1.คอมพิวเตอร์

2.microcontroller ESP01

3.อุปกรณ์ต่อ USB-Serial

4.ตัวโปรแกรมเชื่อมต่อไวไฟและเว็บเซอร์เวอร์

#### ศึกษาข้อมูลเบื้องต้น

1.05 run wifi https://youtu.be/VX-QNQcO-b4

2.code 05_run_wifi https://github.com/choompol-boonmee/lab63b/blob/master/examples/05_Wifi-Web-Server/src/main.cpp

##### วิธีทำการทดลอง

1.เปิด cmd ใช้คำสั่งซึ่งจากตัวอย่างอยู่ในโฟล์เดอร์ pattani ใช้คำสั่ง cd

2.ใช้คำสั่ง 05_run_wifi

5.ใช้คำสั่ง vi src/main.cpp จะขึ้นโค้ดดังนี้
![image](https://user-images.githubusercontent.com/80880126/112214968-64b93b80-8c52-11eb-913f-087eabe36af5.png)
เนืองจากโปรแกรมเชื่อมต่อกับไวไฟดังนั้นต้องใส่ชื่อ wifi และ password ก่อน ตัวโปรแกรมแบ่งออกเป็น 2 ส่วนได้แก่

   1.Setup เป็นการ connect กับไวไฟที่เราใส่ชื่อไว้ตอนแรก และ Setup webserver โดยให้แสดงผลเป็น Hello cntโดย cnt จะบวก 1 ขึ้นเรื่อยๆ

   2.Loop

6.อัพโหลดโปรแกรมเข้าไมโครคอนโทรเลอร์โดยการใช้คำสั่ง pio run-t upload

7.ต่อไมโครคอนโทรเลอร์เข้ากับ 
8.กดปุ่มอัพโหลดและรีเซตที่ตัวไมโทรคอนโทรเลอร์เพื่อให้ตัวโปรแกรมอัพโหลดเข้าไปในตัว microcontroller

8.pio device monitor แล้วดูผลลัพท์

9.สังเกตหลอดไฟจะมีไฟเปิดและปิด

10.นำ microcontroller ที่เขียนโปรแกรมไว้แล้วมาต่อเข้ากับตัวรีเรย์

11.นำตัวรีเรย์ต่อเข้ากับขั้วชาร์ต

###### การบันทึกผลการทดลอง
1.การเขียนโปรแกรมไมโครคอนโทรลเลอร์ด้วยโปรแกรม Output-Port 
จะเห็นจากการใช้คำสั่ง pio device monitor จะมีคำสั่ง on off ทุก ๆ 500 ms 
ตามรหัสที่เราใส่ไว้ในโปรแกรมและเมื่อสังเกตไฟ LED ที่พอร์ต 0 จะสว่างและดับตามคำสั่ง on off เช่นกัน 
 
2.ใช้ไมโครคอนโทรลเลอร์ที่ตั้งโปรแกรมแล้วมาประยุกต์กับตัวรีเลย์คุณ จะเห็นว่าเมื่อต่อขั้วชาร์จจะเห็นว่ารีเลย์จะเปิดและปิดทันทีและสามารถได้ยินเสียงของหน้าสัมผัสของสวิตช์ไฟฟ้าที่เป็นโลหะ

###### อภิปรายผลการทดลอง
จากการทดลองนี้จะเห็นว่าเมื่อเราอัพเดตโปรแกรม 03 Output-Port ลงในไมโครคอนโทรลเลอร์และใช้คำสั่ง pio device monitor เพื่อดูการทำงานของไมโครคอนโทรลเลอร์ หน้าจอจะปรากฎ on และ off
ทุกๆ 500 ms ตามโค้ดที่เราใส่ลงในโปรแกรมและเมื่อสังเกตหลอดไฟ LED ที่พอร์ต 0 จะสว่างและดับตามคำสั่ง on off ตามโปรแกรมที่เราได้อัปโหลดและเมื่อนำไมโครคอนโทรลเลอร์นี้ไปใช้กับรีเลย์จะเห็นว่ารีเรย์จะเเปิดปิดสวิตช์สอดคล้องกับโค้ดที่เรา
ใส่ไว้ในตัวไมโครคอนโทรเลอร์
